<?xml version="1.0" encoding="utf-8"?>
<configdata>
    <!-- Frontend Special Begin-->
    <!-- Updater Begin-->
    <rule>
        <priority>NORMAL</priority>
        <source>^/install(.*)</source>
        <destination>
            <url>/conf/gallery/install$1</url>
        </destination>
        <accept_path_info/>
    </rule>
    <rule id="updater">
        <priority>NORMAL</priority>
        <source>^/updater/check(.*)</source>
        <reverse>/updater/check</reverse>
        <destination>
            <url>/conf/gallery/updater/check$1</url>
        </destination>
        <accept_path_info/>
        <index>9999</index>
    </rule>
    <!-- Updater End-->
    <rule id="error">
        <priority>NORMAL</priority>
        <source>^/error/(.*)</source>
        <reverse>/error</reverse>
        <destination>
            <url>/conf/gallery/error/$1</url>
        </destination>
        <accept_path_info/>
    </rule>
    <rule id="sitemap">
        <priority>HIGH</priority>
        <source>(.*)/sitemap(.*)</source>
        <destination>
            <url>/conf/gallery/sitemap$1/params$2</url>
        </destination>
        <accept_path_info/>
        <blocking>true</blocking>
    </rule>
    <rule id="feed">
        <priority>HIGH</priority>
        <source>(.*)/feed(.*)</source>
        <destination>
            <url>/conf/gallery/sitemap$1/params$2</url>
        </destination>
        <accept_path_info/>
        <blocking>true</blocking>
    </rule>
    <rule id="manifest">
        <priority>HIGH</priority>
        <source>^/manifest\.(.*)</source>
        <destination>
            <url>/conf/gallery/sitemap/manifest.$1</url>
        </destination>
        <accept_path_info/>
        <blocking>true</blocking>
    </rule>
    <!-- Frame Begin-->
    <rule id="frame">
        <priority>HIGH</priority>
        <source>^/frame(.*)</source>
        <reverse>/frame</reverse>
        <destination>
            <url>/conf/gallery/sys/frame$1</url>
        </destination>
        <accept_path_info/>
        <blocking>true</blocking>
        <index>20</index>
    </rule>
    <!-- Frame End-->
    <!-- Services Begin-->
    <rule id="api">
        <priority>NORMAL</priority>
        <source>(?!^/updater/check/file(.*))/api(/[^/]*)(.*)</source>
        <reverse>/api</reverse>
        <destination>
            <url>/conf/gallery/api$2/index.php$3</url>
        </destination>
        <accept_path_info/>
    </rule>
    <rule id="services">
        <priority>NORMAL</priority>
        <source>(?!^/updater/check/file(.*))/srv(.*)</source>
        <reverse>/srv</reverse>
        <destination>
            <url>/conf/gallery/sys/services$2</url>
        </destination>
        <accept_path_info/>
    </rule>
    <rule id="xmlswf">
        <priority>NORMAL</priority>
        <source>^/srv/xml/swf(.*)</source>
        <reverse>/srv/xml/swf</reverse>
        <destination>
            <url>/conf/gallery/modules/swf/xml$1</url>
        </destination>
        <accept_path_info/>
    </rule>
    <!-- Services End-->
    <rule id="notify">
        <priority>NORMAL</priority>
        <source>^/notify(.*)</source>
        <reverse>/notify</reverse>
        <destination>
            <url>/conf/gallery/modules$1</url>
        </destination>
        <accept_path_info/>
    </rule>
    <rule id="search">
        <priority>NORMAL</priority>
        <source>^/search(.*)</source>
        <reverse>/search</reverse>
        <destination>
            <url>/conf/gallery/search$1</url>
        </destination>
        <accept_path_info/>
    </rule>
    <rule id="vgallery">
        <priority>NORMAL</priority>
        <source>^/user/vgallery(.*)</source>
        <reverse>/user/vgallery</reverse>
        <destination>
            <url>/conf/gallery/manage/vgallery/nodes$1</url>
        </destination>
        <accept_path_info/>
    </rule>
    <rule>
        <priority>NORMAL</priority>
        <source>^/user/vgallery(/[^/]+)*/modify$</source>
        <destination>
            <url>/conf/gallery/manage/vgallery/nodes/modify$1</url>
        </destination>
        <accept_path_info/>
    </rule>
    <rule id="gallery">
        <priority>NORMAL</priority>
        <source>^/user/resources(.*)</source>
        <reverse>/user/resources</reverse>
        <destination>
            <url>/conf/gallery/manage/resources$1</url>
        </destination>
        <accept_path_info/>
    </rule>
    <rule id="draft">
        <priority>NORMAL</priority>
        <source>^/user/draft(.*)</source>
        <reverse>/user/draft</reverse>
        <destination>
            <url>/conf/gallery/manage/draft$1</url>
        </destination>
        <accept_path_info/>
    </rule>
    <rule id="menu">
        <priority>NORMAL</priority>
        <source>^/user/menu(.*)</source>
        <reverse>/user/menu</reverse>
        <destination>
            <url>/conf/gallery/manage/static$1</url>
        </destination>
        <accept_path_info/>
    </rule>
    <rule id="ecommerce">
        <priority>NORMAL</priority>
        <source>^/user/manage(.*)</source>
        <reverse>/user/manage</reverse>
        <destination>
            <url>/conf/gallery/ecommerce/manage$1</url>
        </destination>
        <accept_path_info/>
    </rule>
    <rule>
        <priority>NORMAL</priority>
        <source>^/user/manage/preview(.*)</source>
        <destination>
            <url>/conf/gallery/ecommerce/documents/bill/preview$1</url>
        </destination>
        <accept_path_info/>
    </rule>
    <rule>
        <priority>NORMAL</priority>
        <source>^/user/manage/form(.*)</source>
        <destination>
            <url>/conf/gallery/modules/form/manage/modify$1</url>
        </destination>
        <accept_path_info/>
    </rule>
    <rule id="wishlist">
        <priority>NORMAL</priority>
        <source>^/user/wishlist(.*)</source>
        <reverse>/user/wishlist</reverse>
        <destination>
            <url>/conf/gallery/ecommerce/cart/wishlist$1</url>
        </destination>
        <accept_path_info/>
    </rule>
    <rule id="cart">
        <priority>NORMAL</priority>
        <source>^/user/cart(.*)</source>
        <reverse>/user/cart</reverse>
        <destination>
            <url>/conf/gallery/ecommerce/cart$1</url>
        </destination>
        <accept_path_info/>
    </rule>
    <rule id="mpay">
        <priority>NORMAL</priority>
        <source>^/user/mpay(.*)</source>
        <reverse>/user/mpay</reverse>
        <destination>
            <url>/conf/gallery/ecommerce/mpay$1</url>
        </destination>
        <accept_path_info/>
    </rule>
    <!-- User End-->
    <rule id="module_resource">
        <priority>NORMAL</priority>
        <source>^/ext/modules(.*)</source>
        <reverse>/ext/modules</reverse>
        <destination>
            <url>/conf/gallery/modules$1</url>
        </destination>
        <accept_path_info/>
    </rule>
    <!-- Frontend Special End-->
</configdata>
